//import React from "react"
import {useEffect,useState} from "react"
import { Youtube_videos_API } from "../utils/constant"
import VideoCards,{AddVideo} from "./VideosCard"
import {Link} from "react-router-dom"
import { UseSelector, useSelector } from "react-redux"

const VideoContainer=()=>{

const SearchValue=useSelector((store)=>store.filter)
console.log(SearchValue)
    const [videos , setVideos] = useState([])
    const [filterVideos,setfilterVideos]=useState([])
    useEffect(()=>getVideos,[])
     const getVideos= async()=>{
        const data= await fetch(Youtube_videos_API)
        const json= await data.json()
     //   console.log(json)
        setVideos(json.items)
        setfilterVideos(json.items)
     }
    console.log(videos)
console.log(sortVideosfun(videos ,SearchValue.searchquery))

//sortVideosfun(videos,SearchValue.searchQuery)
 let newlist=sortVideosfun(videos ,SearchValue.searchquery)
 console.log(newlist)
 if(SearchValue.callFunction)setfilterVideos(newlist)
//if(newlist)setfilterVideos()


   if(filterVideos.length === 0)return 
return(
<>

<div className="flex flex-wrap w-screen">
   <AddVideo info={videos[0]}/>
{filterVideos.map(video=><Link key={video.id} to={"/watch?v="+video.id}> 

<VideoCards info={video}/> 
</Link> )}


</div>
</>

    )
}


const sortVideosfun=(list , searchInput)=>{
const sortedlist= list.filter(item=>{
  return item?.snippet?.title?.toLowerCase()?.includes(searchInput?.toLowerCase())
})

return sortedlist
}



export default VideoContainer






https://www.youtube.com/youtubei/v1/browse?key=AIzaSyDSiSlCWc4w5AlrgN2dLuS2DYaC0IrDBBs&prettyPrint=false







